<!-- header -->
<%- include('../layouts/adminheader.ejs') %>

<!-- Show All Users Column -->
<main>
    <div class="container-fluid">
        <h1 class="mt-4">All Users<a href="/admin/users/add-user" class="btn btn-outline-primary m-1">Add User</a>
        </h1>
        <ol class="breadcrumb mb-4">
            <li class="breadcrumb-item"><a href="/admin/dashboard">Dashboard</a></li>
            <li class="breadcrumb-item active">All Users</li>
        </ol>
        <!-- All Users Table -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Posts</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% users.forEach((user) => { %>
                <tr>
                    <td><%= user.username %></td>
                    <td><%= user.email %></td>
                    <td><%= user.role %></td>
                    <td><%= user.userPosts.length %> </td>
                    <td>
                        <% if(user.role === "administrator"){ %>
                        <a href="/admin/users/edit-user/<%= user._id %>" class="btn btn-warning btn-sm">Edit</a>
                        <% } else { %>
                        <a href="/admin/users/edit-user/<%= user._id %>" class="btn btn-warning btn-sm">Edit</a>
                        <a href="/admin/users/delete-user/<%= user._id %>" class="btn btn-danger btn-sm">Delete</a>
                        <% } %>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</main>

<!-- footer -->
<%- include('../layouts/adminfooter.ejs') %>