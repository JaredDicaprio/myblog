<%- include('header') %>

<div id="layoutSidenav_content">
    <main>
        <div class="container-fluid">
            <h1 class="mt-4">Edit Post</h1>
            <ol class="breadcrumb mb-4">
                <li class="breadcrumb-item"><a href="/admin/dashboard">Dashboard</a></li>
                <li class="breadcrumb-item active">Edit Post</li>
            </ol>
            <form method="POST" onsubmit="return doEdit(this)">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input name="title" class="form-control" placeholder="Blog Title.." value="<%= post.title %>"
                        required>
                </div>

                <div class="form-group">
                    <label for="content">Content</label>
                    <textarea name="content" class="form-control" placeholder="Enter Text here......" rows="5" cols="20"
                        required><%= post.content %> </textarea>
                </div>
                <input type="submit" class="btn btn-info" value="Submit">
            </form>
            <script>

                let postId = '<%= post.id %>'
                function doEdit(form) {
                    const formData = { title: form.title.value, content: form.content.value, _id: postId }
                    $.ajax({
                        url: '/do-edit-post',
                        method: "POST",
                        data: formData,
                        success: function (response) {
                            alert(response)
                        }
                    })
                    return false
                }
            </script>
            <%- include('footer') %>